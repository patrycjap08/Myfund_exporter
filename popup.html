<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Finax Exporter</title>
    <style>
        :root {
            --Neutral0: #ffffff;
            --Neutral200: #F7F7FB;
            --Neutral400: #F1F1F5;
            --Neutral600: #E2E7EB;
            --Neutral700: #9BA6B5;
            --Neutral800: #63717C;
            --Neutral900: #020E1F;
        }

        html, body {
    margin: 0;
    padding: 0;
    width: 360px;
    height: 100%;
    overflow: hidden; /* tylko .content-section bƒôdzie scrollowaƒá */
    box-sizing: border-box;
}

body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: #fff;
}


        .icon {
            width: 55px;
            height: 55px;
            cursor: pointer;
        }

        #logo {
            width: 40px;
            height: 40px;
        }

        #name {
            width: 360px;
            height: 70px;
        }

        #graphic {
            width: 279px;
            height: 117px;
        }

        button {
            margin: 8px 0;
            padding: 6px 12px;
        }

        #grayBoxa,
        #bybitInfoBox,
        #bybitExtendedInfo,
        #instructionsBoxa,
        #instructionsBoxb,
        #grayBoxb {
            margin-bottom: 4px;
            background-color: var(--Neutral400);
            background-image: url("info.png");
            background-position: 4px 4px;
            background-repeat: no-repeat;
            border-radius: 6px;
            color: var(--Neutral900);
            font-weight: 400;
            font-size: 12px;
            padding: 8px 8px 8px 30px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            display: none;
            text-align: left;
        }

        #instructionsBoxa a,
        #instructionsBoxb a {
            color: black;
            text-decoration: underline;
            /* lub none, je≈õli nie chcesz podkre≈õlenia */
        }

        #dateWarningBox {
            background-color: var(--Neutral400);
            background-image: url("info.png");
            background-position: 4px 4px;
            background-repeat: no-repeat;
            border-radius: 6px;
            color: var(--Neutral900);
            font-weight: 400;
            font-size: 12px;
            padding: 8px 8px 8px 30px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            display: none;
            text-align: left;
        }

        #PPKWarningBox {
            background-color: var(--Neutral400);
            background-image: url("info.png");
            background-position: 4px 4px;
            background-repeat: no-repeat;
            border-radius: 6px;
            color: var(--Neutral900);
            font-weight: 400;
            font-size: 12px;
            padding: 8px 8px 8px 30px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            display: none;
            text-align: left;
        }

        #NobleWarningBox {
            background-color: var(--Neutral400);
            background-image: url("info.png");
            background-position: 4px 4px;
            background-repeat: no-repeat;
            border-radius: 6px;
            color: var(--Neutral900);
            font-weight: 400;
            font-size: 12px;
            padding: 8px 8px 8px 30px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            display: none;
            text-align: left;
        }

        #warning {
            background-color: var(--Neutral400);
            background-image: url("info.png");
            background-position: 4px 4px;
            background-repeat: no-repeat;
            border-radius: 6px;
            color: var(--Neutral900);
            font-weight: 400;
            font-size: 12px;
            padding: 8px 8px 8px 30px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            display: none;
            text-align: left;
        }

        #actionContainer {
            width: 100%;
        }

        .BUTTON,
        #exportBtn {
            background-color: var(--Neutral900);
            color: var(--Neutral0);
            padding: 8px 4px;
            font-size: 12px;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            text-align: center;
            transition: background-color 0.2s ease;
            font-weight: 600;
            line-height: 16px;
            display: none;
        }

        .BUTTON:disabled,
        #bybitFundingBtn:disabled,
        #bybitUnifiedBtn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        .BUTTON:hover,
        #exportBtn:hover {
            background-color: var(--Neutral800);
        }

        .tooltip-container {
            display: inline-block;
        }

        .tooltip-text {
            position: fixed;
            /* <- kluczowe */
            left: 50%;
            bottom: 75px;
            /* tu≈º nad ikonƒÖ (dostosuj w razie potrzeby) */
            transform: translateX(-50%);
            background-color: #333;
            color: #fff;
            text-align: left;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            width: 300px;
            max-width: 90%;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 999;
            white-space: normal;
        }


        .tooltip-text a {
            color: #D09004;
            text-decoration: underline;
            /* opcjonalnie: zachowaj podkre≈õlenie */
        }

        .tooltip-text a:hover {
            color: #ffd700;
            /* np. z≈Çoty po najechaniu ‚Äì mo≈ºesz zmieniƒá na inny */
        }

        .tooltip-container {
    display: inline-block;
    position: relative; /* DODANE */
}

.tooltip-text {
    position: absolute;           /* BY≈ÅO fixed */
    left: 50%;
    bottom: 75px;
    transform: translateX(-50%);
    background-color: #333;
    color: #fff;
    text-align: left;
    padding: 10px;
    border-radius: 5px;
    font-size: 12px;
    width: 300px;
    max-width: 90%;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s;
    z-index: 999;
    white-space: normal;
}

        

        .mini-icon {
            width: 30px;
            height: 30px;
            position: fixed;
            bottom: 10px;
            right: 10px;
            cursor: pointer;
            z-index: 999;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .mini-icon:hover {
            opacity: 1;
        }

        .trash-tooltip {
            position: absolute;
            top: 50%;
            right: 100%;
            transform: translateY(-50%);
            margin-right: 8px;
            background-color: #333;
            color: #fff;
            white-space: nowrap;
            padding: 6px 10px;
            border-radius: 5px;
            font-size: 12px;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 1000;
        }


        /* Sta≈Çy pasek na dole */
        #bottomBar {
          
    height: 70px;
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #fff;
    box-shadow: 0 -1px 4px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    height: 70px;
    z-index: 1000;

    padding: 4px 0;
    box-sizing: border-box;
}


        /* Wyr√≥wnanie ikon w poziomie */
        #bottomIcons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            /* odleg≈Ço≈õƒá miƒôdzy ikonami */
            width: auto;
            /* dopasowane do zawarto≈õci, nie 100% */
        }

        /* Kosz ‚Äî pod ikonami, nie fixed */
        #clearDataContainer {
            position: relative;
            margin-top: 2px;
        }

        /* Dodatkowy margines, ≈ºeby tre≈õƒá nie chowa≈Ça siƒô pod paskiem */
    




        .tooltip-text::after {
            left: auto;
            right: 0;
        }

        .top-section {
          
    height: 200px;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background-color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 1000;
    padding-top: 10px;
    padding-bottom: 5px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);

    height: 200px;
    box-sizing: border-box;
}

        .content-section {
    position: absolute;
    top: 200px;   /* = wysoko≈õƒá top-section */
    left: 0;
    right: 0;
    bottom: 70px; /* = wysoko≈õƒá bottomBar */

    width: 100%;
    box-sizing: border-box;

    padding: 10px;
    padding-bottom: 10px;

    display: flex;
    flex-direction: column;
    align-items: center;

    overflow-y: auto;
    scrollbar-gutter: stable both-edges;
}

body::-webkit-scrollbar {
    display: none;
}

    </style>
</head>

<body>
    <div class="top-section">
        <!-- <img id="logo" src="icon.png" alt="Logo" -->
        <img id="name" src="name_gray.png" alt="Name">
        <img id="graphic" src="graphic3.png" alt="Graphic">
    </div>

    <div class="content-section">
        <div id="instructionsBoxa" style="display: none;"></div>
        <div id="grayBoxa">Aby wyeksportowaƒá dane z platformy Finax, wejd≈∫ w szczeg√≥≈Çy transakcji swojego rachunku. <b> PrzeglƒÖd rachunk√≥w -> Szczeg√≥≈Çy konta -> PrzeglƒÖd transakcji </b></div>
        <div id="grayBoxb">Aby wyeksportowaƒá dane z platformy Mbank, upewnij siƒô, ≈ºe jest≈õ na w≈Ça≈õwiwym profilu, a nastƒôpnie przejd≈∫ do histori inwestycji: <b>Produkty -> Inwestycje -> Wszystkie -> Tw√≥j portfel inwestycyjny -> Historia</b></div>
        <div id="instructionsBoxb">Je≈õli chcesz pobraƒá dane kupna i sprzeda≈ºy akcji, przejd≈∫ do zak≈Çadki <b>Kupno/Sprzeda≈º</b>.<br>Je≈ºeli chcesz pobraƒá dane operacji na koncie, przejd≈∫ do zak≈Çadki <b>Operacje</b>.</div>
        <div id="PPKWarningBox"><b>Zaloguj siƒô i przejd≈∫ do widoku transakcji kt√≥re chcesz zaimportowaƒá. Nie musisz rozwijaƒá szczegu≈Ç√≥w transakcji, wtyczka zrobi to za Ciebie.</b></div>
        <div id="NobleWarningBox"><b>Zaloguj siƒô i przejd≈∫ do widoku histori inwestycji.</b></div>
        <div id="dateWarningBox"><b>Upewnij siƒô, ≈ºe wybra≈Çe≈õ odpowiedni zakres dat.</b></div>
        <button id="exportBtn">üì• Pobierz dane</button>
        <!-- BYBIT: pytanie o zakres > 90 dni -->
        <!-- BYBIT: pytanie o zakres > 90 dni (WY≈ÅƒÑCZONE - nic nie bƒôdzie wy≈õwietlane) -->
        <div id="bybitQuestionInner" style="display:none;">
            <div style="font-size:12px; line-height:1.4; margin-bottom:8px; background:#F1F1F5; border-radius:6px; padding:8px 10px;">
                <p><b>‚ùì Czy chcesz zaimportowaƒá dane z konta Funding z okresu d≈Çu≈ºszego ni≈º 90 dni?</b></p>
                <div style="display:flex; gap:8px;">
                    <button id="bybitAnsYes" class="BUTTON" style="display:block; flex:1;">Tak</button>
                    <button id="bybitAnsNo" class="BUTTON" style="display:block; flex:1;">Nie</button>
                </div>
            </div>
        </div>


        <!-- BYBIT: tryb rozszerzony (bƒôdzie domy≈õlnie u≈ºywany) -->
        <div id="bybitExtendedInfo" style="display:none; margin-top:8px;" class="bybit-box">
            <b>Jak pobraƒá dane z Bybit</b><br>
            <p>Zak≈Çadka <b>All Transactions</b> dla <b>konta Funding Account</b> pokazuje pe≈Çne dane tylko dla ostatnich <b>90 dni</b>, dlatego starsze operacje trzeba pobraƒá osobno z konkretnych sekcji (Deposit, Withdraw, P2P, One-Click Buy itd.) w zak≈Çadce History.
                Poni≈ºsze przyciski zbierajƒÖ te dane i ≈ÇƒÖczƒÖ je w jeden plik do importu w MyFund.</p>

            <p><b>1Ô∏è‚É£ Funding Account</b> ‚Äì przejd≈∫ do:
                <b>Assets ‚Üí Funding Account ‚Üí History ‚Üí zak≈Çadka History</b>.<br>
                Wejd≈∫ do konkretnej <b>sekcji</b> (np. Deposit, Withdraw, P2P itp.) ‚Äì wtedy jeden z przycisk√≥w poni≈ºej stanie siƒô aktywny.
                Nastƒôpnie wybierz zakres dat i pobierz dane. Mo≈ºesz powtarzaƒá proces dla dowolnej liczby sekcji.
            </p>

            <div style="background:#fff8e5; border-left:4px solid #f1c232; padding:6px 10px; border-radius:6px; margin:8px 0;">
                <b>‚ö†Ô∏è Uwaga:</b><br>
                Dane z kolejnych sekcji sƒÖ <b>dodawane</b> do zbioru przeznaczonego do importu.</b><br>
                Wtyczka dba aby pobierane rekordy nie duplikowa≈Çy siƒô.</b><br>
                Je≈ºeli pobra≈Çe≈õ zbyt du≈ºo danych mo≈ºesz usunƒÖƒá je pojedy≈Ñczo w MyFund lub skasowaƒá wszystkie zapisane do tej pory rekordy z Bybit klikajƒÖc w ikonke kosza i zaczƒÖƒá ich pobieranie od nowa.<br>
            </div>

            <p><b>2Ô∏è‚É£ Unified Trading Account</b> ‚Äì przejd≈∫ do:
                <b>Assets ‚Üí Unified Trading Account ‚Üí History Records ‚Üí Transaction Log</b>, wybierz zakres dat i pobierz dane.
            </p>

            <div style="background:#eef6ff; border-left:4px solid #2f75e0; padding:6px 10px; border-radius:6px; margin:8px 0;">
                <b>‚ÑπÔ∏è Wskaz√≥wka:</b><br>
                Mo≈ºesz zaimportowaƒá dane tylko z jednego konta ‚Äì <b>Funding</b> lub <b>Unified</b>.
                Upewnij siƒô jednak, ≈ºe transakcje z drugiego konta zosta≈Çy ju≈º wcze≈õniej wczytane do MyFund.
            </div>

        </div>

        <div id="bybitExtendedBtns" style="display:none;">
            <button id="bybitDepositSpotBtn" class="BUTTON">Pobierz dane z sekcji Deposit (krypto)</button>
            <button id="bybitWithdrawSpotBtn" class="BUTTON">Pobierz dane z sekcji Withdraw (krypto)</button>
            <button id="bybitOneClickBuyBtn" class="BUTTON">Pobierz dane z sekcji One-Click Buy</button>
            <button id="bybitP2PBtn" class="BUTTON">Pobierz dane z sekcji P2P</button>
            <button id="bybitDepositFiatBtn" class="BUTTON">Pobierz dane z sekcji Deposit Fiat</button>
            <button id="bybitWithdrawFiatBtn" class="BUTTON">Pobierz dane z sekcji Withdraw Fiat</button>
        </div>

        <div id="bybitInfoBox" style="display:none;" class="bybit-box">
            <b>Import z Bybit przewiduje wykonanie 2 krok√≥w:</b><br><br>
            <p><b>1Ô∏è‚É£ Funding Account</b> ‚Äì przejd≈∫ do:
                <b>Assets ‚Üí Funding Account ‚Üí History ‚Üí zak≈Çadka All Transactions</b>.
                Wybierz zakres dat i kliknij <b>‚ÄûPobierz dane‚Äù</b>.
            </p>

            <p><b>2Ô∏è‚É£ Unified Trading Account</b> ‚Äì przejd≈∫ do:
                <b>Assets ‚Üí Unified Trading Account ‚Üí History Records ‚Üí Transaction Log</b>.
                Wybierz zakres dat i kliknij <b>‚ÄûPobierz dane‚Äù</b>.
            </p>

            <div style="background:#fff8e5; border-left:4px solid #f1c232; padding:6px 10px; border-radius:6px; margin:8px 0;">
                <b>‚ö†Ô∏è Uwaga:</b><br>
                Je≈õli pobra≈Ça≈õ ju≈º transakcje z zak≈Çadki <b>History</b>, pobranie danych z zak≈Çadki <b>All Transactions</b> spowoduje ich <b>nadpisanie</b>.<br>
                Natomiast je≈õli wcze≈õniej pobiera≈Ça≈õ dane z <b>Unified Trading Account</b>, pobranie nowych danych z <b>Funding Account</b> <b>nie usunie</b> tamtych zapis√≥w.
            </div>

            <div style="background:#eef6ff; border-left:4px solid #2f75e0; padding:6px 10px; border-radius:6px; margin:8px 0;">
                <b>‚ÑπÔ∏è Wskaz√≥wka:</b><br>
                Mo≈ºesz zaimportowaƒá dane tylko z jednego konta ‚Äì <b>Funding</b> lub <b>Unified</b>.
                Upewnij siƒô jednak, ≈ºe transakcje z drugiego konta zosta≈Çy ju≈º wcze≈õniej wczytane do MyFund.
            </div>

            <p>Po pobraniu danych wtyczka automatycznie <b>przekieruje Ciƒô do MyFund</b>, gdzie wkleisz kompletny zestaw transakcji.</p>
        </div>

        <button id="bybitFundingBtn" class="BUTTON" style="display:none;">
            Pobierz dane z Funding Account
        </button>
        <button id="bybitUnifiedBtn" class="BUTTON" style="display:none;">
            Pobierz dane z Unified Trading Account
        </button>

        <div id="warning"></div>
        <div id="actionContainer"></div>
    </div> <!-- <-- to zamyka .content-section -->



    <div id="bottomBar">
        <div id="bottomIcons">
            <img id="myfundIcon" class="icon" src="icon.png" title="MyFund">
            <img id="finaxIcon" class="icon" src="finax-icon.png" title="Finax" style="display: none;">
            <img id="mbankIcon" class="icon" src="mbank_icon.png" title="mBank" style="display: none;">
            <img id="paribasIcon" class="icon" src="paribas_icon.png" title="BNP Paribas" style="display: none;">
            <img id="mileniumIcon" class="icon" src="milenium_icon.png" title="Milenium" style="display: none;">
            <img id="investorsIcon" class="icon" src="investors_icon.png" title="Investors" style="display: none;">
            <img id="santanderIcon" class="icon" src="santander_icon.png" title="Santander" style="display: none;">
            <img id="nobleIcon" class="icon" src="noble_icon.png" title="Noble" style="display: none;">
            <img id="bybitIcon" class="icon" src="bybit_icon.png" title="Bybit" style="display: none;">

            <div class="tooltip-container">
                <img class="icon" src="info-icon.png" id="customInfoIcon">
                <span class="tooltip-text">
                    Wejd≈∫ na stronƒô jednej z obs≈Çugiwanych platform (...).
                </span>
            </div>
        </div>

        <div id="clearDataContainer" class="tooltip-container">
            <span class="trash-tooltip">Usu≈Ñ dane z pamiƒôci przeglƒÖdarki</span>
            <img id="clearDataIcon" class="mini-icon" src="trash_dark.svg" title="">
        </div>
    </div>




    <script src="popup.js"></script>
</body>

</html>